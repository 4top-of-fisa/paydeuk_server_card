2025-06-12 10:49:25 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-06-12 10:49:25 INFO  t.p.PaydeukServerCardApplicationTests - Starting PaydeukServerCardApplicationTests using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:25 INFO  t.p.PaydeukServerCardApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-06-12 10:49:27 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-12 10:49:27 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 757 ms. Found 9 JPA repository interfaces.
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.benefit.repository.BenefitRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.benefit_condition.repository.BenefitConditionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.benefit_usage_count.repository.BenefitUsageCountRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.card.repository.CardRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.discount_rate.repository.DiscountRateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.example.repository.ExampleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.issued_card.repository.IssuedCardRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.issued_card_token.repository.IssuedCardTokenRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface tower_of_fisa.paydeuk_server_card.previous_month_spending.repository.PreviousMonthSpendingRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-12 10:49:28 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 0 Redis repository interfaces.
2025-06-12 10:49:30 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-12 10:49:31 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:0c000946-d6eb-4541-aed8-9b30ede84005 user=SA
2025-06-12 10:49:31 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-12 10:49:31 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'dataSourceScriptDatabaseInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
2025-06-12 10:49:31 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-06-12 10:49:31 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-06-12 10:49:31 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-06-12 10:49:31 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'dataSourceScriptDatabaseInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 102 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 109 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "DROP [*]DATABASE IF EXISTS paydeuk_server_card"; expected "TABLE, INDEX, USER, SEQUENCE, CONSTANT, TRIGGER, MATERIALIZED, VIEW, ROLE, ALIAS, SCHEMA, ALL OBJECTS, DOMAIN, TYPE, AGGREGATE, SYNONYM"; SQL statement:
DROP DATABASE IF EXISTS paydeuk_server_card [42001-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:750)
	at org.h2.command.Parser.parseDrop(Parser.java:2240)
	at org.h2.command.Parser.parsePrepared(Parser.java:679)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:569)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 119 common frames omitted
2025-06-12 10:49:31 WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplicationTests@1bb4c431]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1b317e7d testClass = tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplicationTests, locations = [], classes = [tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@efde75f, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2b95e48b, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@41925502, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@5b11a194, org.springframework.boot.test.context.SpringBootTestAnnotation@204596d9], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'dataSourceScriptDatabaseInitializer' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1463)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 87 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	... 102 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of file [C:\Users\3-30\paydeuk\paydeuk_server_card\build\resources\main\schema.sql]: DROP DATABASE IF EXISTS paydeuk_server_card
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 109 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "DROP [*]DATABASE IF EXISTS paydeuk_server_card"; expected "TABLE, INDEX, USER, SEQUENCE, CONSTANT, TRIGGER, MATERIALIZED, VIEW, ROLE, ALIAS, SCHEMA, ALL OBJECTS, DOMAIN, TYPE, AGGREGATE, SYNONYM"; SQL statement:
DROP DATABASE IF EXISTS paydeuk_server_card [42001-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.getSyntaxError(DbException.java:261)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:750)
	at org.h2.command.Parser.parseDrop(Parser.java:2240)
	at org.h2.command.Parser.parsePrepared(Parser.java:679)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:569)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 119 common frames omitted
2025-06-12 10:49:31 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.benefit_usage_count.controller.BenefitUsageCountControllerTest]: BenefitUsageCountControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:31 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.benefit_usage_count.controller.BenefitUsageCountControllerTest
2025-06-12 10:49:31 INFO  t.p.b.c.BenefitUsageCountControllerTest - Starting BenefitUsageCountControllerTest using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:31 INFO  t.p.b.c.BenefitUsageCountControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-06-12 10:49:34 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-12 10:49:34 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-12 10:49:34 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-12 10:49:34 INFO  t.p.b.c.BenefitUsageCountControllerTest - Started BenefitUsageCountControllerTest in 3.325 seconds (process running for 13.016)
2025-06-12 10:49:35 ERROR EXCEPTION_HANDLER - NoSuchElementFoundException404 : 해당 카드를 찾을 수 없습니다.
2025-06-12 10:49:35 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.benefit_usage_count.repository.BenefitUsageCountRepositoryTest]: BenefitUsageCountRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:35 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.benefit_usage_count.repository.BenefitUsageCountRepositoryTest
2025-06-12 10:49:35 INFO  t.p.b.r.BenefitUsageCountRepositoryTest - Starting BenefitUsageCountRepositoryTest using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:35 INFO  t.p.b.r.BenefitUsageCountRepositoryTest - The following 1 profile is active: "test"
2025-06-12 10:49:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-12 10:49:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-12 10:49:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 9 JPA repository interfaces.
2025-06-12 10:49:35 INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with embedded version
2025-06-12 10:49:35 INFO  o.s.j.d.e.EmbeddedDatabaseFactory - Starting embedded database: url='jdbc:h2:mem:67aad1a4-ed5b-49cd-98c5-9d445ee30ddc;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - Executing SQL script from class path resource [schema-test.sql]
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS previous_month_spending
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS benefit_usage_count
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS card_benefit
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS discount_rate
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS benefit_condition
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS spending_range
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS issued_card_token
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS issued_card
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS paydeuk_registered_card
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS card
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS users
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS benefit
2025-06-12 10:49:35 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: DROP TABLE IF EXISTS merchant
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE merchant ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, name VARCHAR(20) NOT NULL, category ENUM ('CULTURE', 'FOOD_BEVERAGE', 'SHOPPING', 'SUBSCRIBE', 'TRANSPORTATION') NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE benefit ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, description VARCHAR(100), title VARCHAR(100), benefit_type ENUM ('DISCOUNT', 'POINT', 'CASHBACK') NOT NULL, has_additional_conditions BOOLEAN NOT NULL, merchant_id BIGINT, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (merchant_id) REFERENCES merchant (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE users ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, name VARCHAR(10) NOT NULL, phone_number VARCHAR(20) NOT NULL, birth_date VARCHAR(20) NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE paydeuk_registered_card ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, card_token VARCHAR(30) NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE card ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, name VARCHAR(30) NOT NULL, type ENUM ('CREDIT', 'DEBIT') NOT NULL, image_url VARCHAR(255) NOT NULL, annual_fee BIGINT NOT NULL, company ENUM ('KOOKMIN', 'HYUNDAI', 'WOORI', 'SHINHAN', 'SAMSUNG') NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE issued_card ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, user_id BIGINT NOT NULL, card_id BIGINT NOT NULL, card_number VARCHAR(20) NOT NULL, cvc VARCHAR(3) NOT NULL, expiration_year VARCHAR(4) NOT NULL, expiration_month VARCHAR(2) NOT NULL, card_password VARCHAR(60) NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (user_id) REFERENCES users (id), FOREIGN KEY (card_id) REFERENCES card (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE issued_card_token ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, issued_card_id BIGINT NOT NULL, payment_service ENUM ('PAYDEUK') NOT NULL, paydeuk_registered_card_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, FOREIGN KEY (issued_card_id) REFERENCES issued_card (id), FOREIGN KEY (paydeuk_registered_card_id) REFERENCES paydeuk_registered_card (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE spending_range ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, min_spending BIGINT, max_spending BIGINT )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE benefit_condition ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, benefit_id BIGINT NOT NULL, spending_range_id BIGINT, `value` BIGINT NOT NULL, condition_category ENUM ('PER_TRANSACTION_LIMIT', 'DAILY_LIMIT_COUNT', 'MONTHLY_LIMIT_COUNT', 'DAILY_DISCOUNT_LIMIT', 'MONTHLY_DISCOUNT_LIMIT') NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (benefit_id) REFERENCES benefit (id), FOREIGN KEY (spending_range_id) REFERENCES spending_range (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE discount_rate ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, benefit_id BIGINT NOT NULL, spending_range_id BIGINT NOT NULL, apply_type ENUM ('RATE', 'AMOUNT') NOT NULL, amount FLOAT NOT NULL, FOREIGN KEY (benefit_id) REFERENCES benefit (id), FOREIGN KEY (spending_range_id) REFERENCES spending_range (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE card_benefit ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, card_id BIGINT NOT NULL, benefit_id BIGINT NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (card_id) REFERENCES card (id), FOREIGN KEY (benefit_id) REFERENCES benefit (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE benefit_usage_count ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, issued_card_id BIGINT NOT NULL, condition_id BIGINT NOT NULL, `value` INT, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (issued_card_id) REFERENCES issued_card (id), FOREIGN KEY (condition_id) REFERENCES benefit_condition (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - 0 returned as update count for SQL: CREATE TABLE previous_month_spending ( id BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL, issued_card_id BIGINT NOT NULL, `value` INT NOT NULL, created_at TIMESTAMP, updated_at TIMESTAMP, FOREIGN KEY (issued_card_id) REFERENCES issued_card (id) )
2025-06-12 10:49:36 DEBUG o.s.jdbc.datasource.init.ScriptUtils - Executed SQL script from class path resource [schema-test.sql] in 98 ms.
2025-06-12 10:49:36 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-12 10:49:36 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-06-12 10:49:36 INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-12 10:49:36 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-12 10:49:36 WARN  org.hibernate.orm.deprecation - HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-12 10:49:36 WARN  org.hibernate.orm.deprecation - HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-06-12 10:49:39 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-12 10:49:39 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-12 10:49:39 INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-12 10:49:41 INFO  t.p.b.r.BenefitUsageCountRepositoryTest - Started BenefitUsageCountRepositoryTest in 6.276 seconds (process running for 19.885)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (birth_date, created_at, name, phone_number, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        card
        (annual_fee, company, created_at, image_url, name, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card
        (card_id, card_number, card_password, created_at, cvc, expiration_month, expiration_year, updated_at, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        benefit
        (description, title, benefit_type, created_at, has_additional_conditions, merchant_id, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        benefit_condition
        (benefit_id, condition_category, created_at, spending_range_id, updated_at, `value`) 
    values
        (?, ?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        benefit_condition
        (benefit_id, condition_category, created_at, spending_range_id, updated_at, `value`) 
    values
        (?, ?, ?, ?, ?, ?)
2025-06-12 10:49:41 DEBUG org.hibernate.SQL - 
    insert 
    into
        benefit_usage_count
        (condition_id, created_at, issued_card_id, updated_at, `value`) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:42 DEBUG org.hibernate.SQL - 
    insert 
    into
        benefit_usage_count
        (condition_id, created_at, issued_card_id, updated_at, `value`) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:42 DEBUG org.hibernate.SQL - 
    select
        buc1_0.id,
        buc1_0.condition_id,
        buc1_0.created_at,
        buc1_0.issued_card_id,
        buc1_0.updated_at,
        buc1_0.`value` 
    from
        benefit_usage_count buc1_0 
    where
        buc1_0.issued_card_id=? 
        and buc1_0.condition_id in (?, ?)
2025-06-12 10:49:44 INFO  t.p.b.s.BenefitUsageCountService - 카드 조건 사용 조회 redisKey: BenefitSum:1:benefit:2506
2025-06-12 10:49:44 INFO  t.p.b.s.BenefitUsageCountService - vlueStr: 3
2025-06-12 10:49:44 INFO  t.p.b.s.BenefitUsageCountService - Integer value: 3
2025-06-12 10:49:44 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.card.controller.CardControllerTest]: CardControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:44 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.card.controller.CardControllerTest
2025-06-12 10:49:45 INFO  t.p.c.controller.CardControllerTest - Starting CardControllerTest using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:45 INFO  t.p.c.controller.CardControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-06-12 10:49:47 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-12 10:49:47 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-12 10:49:47 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-12 10:49:47 INFO  t.p.c.controller.CardControllerTest - Started CardControllerTest in 2.275 seconds (process running for 25.402)
2025-06-12 10:49:47 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.card.repository.CardRepositoryTest]: CardRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:47 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.card.repository.CardRepositoryTest
2025-06-12 10:49:47 DEBUG org.hibernate.SQL - 
    insert 
    into
        card
        (annual_fee, company, created_at, image_url, name, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:47 DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.annual_fee,
        c1_0.company,
        c1_0.created_at,
        c1_0.image_url,
        c1_0.name,
        c1_0.type,
        c1_0.updated_at 
    from
        card c1_0 
    where
        c1_0.company=?
2025-06-12 10:49:48 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.issued_card.repository.IssuedCardRepositoryTest]: IssuedCardRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:48 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.issued_card.repository.IssuedCardRepositoryTest
2025-06-12 10:49:48 DEBUG org.hibernate.SQL - 
    select
        ic1_0.id,
        ic1_0.card_id,
        ic1_0.card_number,
        ic1_0.card_password,
        ic1_0.created_at,
        ic1_0.cvc,
        ic1_0.expiration_month,
        ic1_0.expiration_year,
        ic1_0.updated_at,
        ic1_0.user_id 
    from
        issued_card ic1_0 
    where
        ic1_0.card_number=?
2025-06-12 10:49:48 DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (birth_date, created_at, name, phone_number, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:48 DEBUG org.hibernate.SQL - 
    insert 
    into
        card
        (annual_fee, company, created_at, image_url, name, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:48 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card
        (card_id, card_number, card_password, created_at, cvc, expiration_month, expiration_year, updated_at, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:48 DEBUG org.hibernate.SQL - 
    select
        ic1_0.id,
        ic1_0.card_id,
        ic1_0.card_number,
        ic1_0.card_password,
        ic1_0.created_at,
        ic1_0.cvc,
        ic1_0.expiration_month,
        ic1_0.expiration_year,
        ic1_0.updated_at,
        ic1_0.user_id 
    from
        issued_card ic1_0 
    where
        ic1_0.card_number=?
2025-06-12 10:49:48 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.previous_month_spending.controller.PreviousMonthSpendingControllerTest]: PreviousMonthSpendingControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:48 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.previous_month_spending.controller.PreviousMonthSpendingControllerTest
2025-06-12 10:49:48 INFO  t.p.p.c.PreviousMonthSpendingControllerTest - Starting PreviousMonthSpendingControllerTest using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:48 INFO  t.p.p.c.PreviousMonthSpendingControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-06-12 10:49:49 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-12 10:49:49 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-12 10:49:49 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-12 10:49:49 INFO  t.p.p.c.PreviousMonthSpendingControllerTest - Started PreviousMonthSpendingControllerTest in 1.064 seconds (process running for 27.585)
2025-06-12 10:49:49 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.previous_month_spending.repository.PreviousMonthSpendingRepositoryTest]: PreviousMonthSpendingRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:49 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.previous_month_spending.repository.PreviousMonthSpendingRepositoryTest
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    select
        pms1_0.`value` 
    from
        previous_month_spending pms1_0 
    join
        issued_card ic1_0 
            on ic1_0.id=pms1_0.issued_card_id 
    join
        issued_card_token ictl1_0 
            on ic1_0.id=ictl1_0.issued_card_id 
    join
        paydeuk_registered_card prc1_0 
            on prc1_0.id=ictl1_0.paydeuk_registered_card_id 
    where
        prc1_0.card_token=?
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (birth_date, created_at, name, phone_number, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        card
        (annual_fee, company, created_at, image_url, name, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card
        (card_id, card_number, card_password, created_at, cvc, expiration_month, expiration_year, updated_at, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        paydeuk_registered_card
        (card_token, created_at, updated_at) 
    values
        (?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card_token
        (created_at, issued_card_id, paydeuk_registered_card_id, payment_service, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    insert 
    into
        previous_month_spending
        (created_at, issued_card_id, updated_at, `value`) 
    values
        (?, ?, ?, ?)
2025-06-12 10:49:49 DEBUG org.hibernate.SQL - 
    select
        pms1_0.`value` 
    from
        previous_month_spending pms1_0 
    join
        issued_card ic1_0 
            on ic1_0.id=pms1_0.issued_card_id 
    join
        issued_card_token ictl1_0 
            on ic1_0.id=ictl1_0.issued_card_id 
    join
        paydeuk_registered_card prc1_0 
            on prc1_0.id=ictl1_0.paydeuk_registered_card_id 
    where
        prc1_0.card_token=?
2025-06-12 10:49:49 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.token.controller.IssuedCardTokenControllerTest]: IssuedCardTokenControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:50 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.token.controller.IssuedCardTokenControllerTest
2025-06-12 10:49:50 INFO  t.p.t.c.IssuedCardTokenControllerTest - Starting IssuedCardTokenControllerTest using Java 17.0.13 with PID 27184 (started by 3-30 in C:\Users\3-30\paydeuk\paydeuk_server_card)
2025-06-12 10:49:50 INFO  t.p.t.c.IssuedCardTokenControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-06-12 10:49:50 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-12 10:49:50 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-12 10:49:50 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-12 10:49:50 INFO  t.p.t.c.IssuedCardTokenControllerTest - Started IssuedCardTokenControllerTest in 0.658 seconds (process running for 28.88)
2025-06-12 10:49:50 ERROR EXCEPTION_HANDLER - NoSuchElementFoundException404 : 해당 카드를 찾을 수 없습니다.
2025-06-12 10:49:50 ERROR EXCEPTION_HANDLER - BadRequestException400 : 카드 정보가 유효하지 않습니다.
2025-06-12 10:49:50 ERROR EXCEPTION_HANDLER - ForbiddenException403 : 카드 소유자가 아닙니다.
2025-06-12 10:49:50 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [tower_of_fisa.paydeuk_server_card.token.repository.IssuedCardTokenRepositoryTest]: IssuedCardTokenRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-12 10:49:50 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration tower_of_fisa.paydeuk_server_card.PaydeukServerCardApplication for test class tower_of_fisa.paydeuk_server_card.token.repository.IssuedCardTokenRepositoryTest
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    insert 
    into
        users
        (birth_date, created_at, name, phone_number, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    insert 
    into
        card
        (annual_fee, company, created_at, image_url, name, type, updated_at) 
    values
        (?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card
        (card_id, card_number, card_password, created_at, cvc, expiration_month, expiration_year, updated_at, user_id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    insert 
    into
        paydeuk_registered_card
        (card_token, created_at, updated_at) 
    values
        (?, ?, ?)
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    insert 
    into
        issued_card_token
        (created_at, issued_card_id, paydeuk_registered_card_id, payment_service, updated_at) 
    values
        (?, ?, ?, ?, ?)
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    select
        ict1_0.issued_card_id 
    from
        issued_card_token ict1_0 
    join
        paydeuk_registered_card prc1_0 
            on prc1_0.id=ict1_0.paydeuk_registered_card_id 
    where
        prc1_0.card_token=?
2025-06-12 10:49:50 DEBUG org.hibernate.SQL - 
    select
        ict1_0.issued_card_id 
    from
        issued_card_token ict1_0 
    join
        paydeuk_registered_card prc1_0 
            on prc1_0.id=ict1_0.paydeuk_registered_card_id 
    where
        prc1_0.card_token=?
2025-06-12 10:49:50 INFO  t.p.t.service.IssuedCardTokenService - [카드 토큰 발급 요청] 사용자 이름: 다른사람, 카드 번호: ****-****-****-4445
2025-06-12 10:49:50 WARN  t.p.t.service.IssuedCardTokenService - [사용자 정보 불일치] 요청자: 다른사람, 카드 소유자: 임지섭
2025-06-12 10:49:50 INFO  t.p.t.service.IssuedCardTokenService - [카드 토큰 발급 요청] 사용자 이름: 임지섭, 카드 번호: ****-****-****-4445
2025-06-12 10:49:50 WARN  t.p.t.service.IssuedCardTokenService - [카드 정보 불일치] 카드 번호: ****-****-****-4445
2025-06-12 10:49:51 INFO  t.p.t.service.IssuedCardTokenService - [카드 토큰 발급 요청] 사용자 이름: 임지섭, 카드 번호: ****-****-****-4445
2025-06-12 10:49:51 WARN  t.p.t.service.IssuedCardTokenService - [카드 없음] cardNumber: ****-****-****-4445
2025-06-12 10:49:51 INFO  t.p.t.service.IssuedCardTokenService - [카드 토큰 발급 요청] 사용자 이름: 임지섭, 카드 번호: ****-****-****-4445
2025-06-12 10:49:51 INFO  t.p.t.service.IssuedCardTokenService - [페이득 카드 등록 성공] 사용자: 임지섭, 카드 ID: null
2025-06-12 10:49:51 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
